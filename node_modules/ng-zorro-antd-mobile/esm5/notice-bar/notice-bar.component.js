/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { IconHandler } from '../core/util/icon';
import * as util from './util';
var NoticeBarComponent = /** @class */ (function () {
    function NoticeBarComponent(_iconHandler) {
        this._iconHandler = _iconHandler;
        this.visiable = false;
        this.marqueeScroll = 'scrolling';
        this.style = {};
        this._option = {
            mode: '',
            icon: '',
            action: '',
            content: '',
            fontSize: '14px',
            scrolling: true,
            marqueeProps: { loop: true, leading: 500, trailing: 8000, fps: 200, style: {} }
        };
        this.onClick = new EventEmitter();
        this._iconHandler.load();
    }
    Object.defineProperty(NoticeBarComponent.prototype, "option", {
        get: /**
         * @return {?}
         */
        function () {
            return this._option;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            Object.assign(this._option, value);
            this.dataProcess();
            if (this._option.scrolling) {
                this.marqueeScroll = 'scrolling';
            }
            else {
                this.marqueeScroll = 'scrolling-stop';
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NoticeBarComponent.prototype.click = /**
     * @return {?}
     */
    function () {
        this.onClick.emit(this._option.mode);
        if (this._option.mode === 'closable') {
            this.visiable = false;
        }
    };
    /**
     * @return {?}
     */
    NoticeBarComponent.prototype.dataProcess = /**
     * @return {?}
     */
    function () {
        this.visiable = true;
        this.style = {
            width: '200%'
        };
        this._width = util.getTextWidth(this._option.content, this._option.fontSize);
        if (util.getWidthHeight().width < this._width) {
            /** @type {?} */
            var count = this._option.marqueeProps.loop ? 'infinite' : 1;
            /** @type {?} */
            var animationName = "noticebarmarquee_" + this._width;
            this.style = {
                width: this._width * 2 + 'px',
                'animation-name': animationName,
                'animation-delay': this._option.marqueeProps.leading + "ms",
                'animation-duration': (1 / this._option.marqueeProps.fps) * this._width / util.getWidthHeight().width * 1000 + "s",
                'animation-iteration-count': "" + count
            };
            this.marqueeScroll = 'scrolling';
            this.insetKeyframe(animationName);
        }
        else {
            this.marqueeScroll = 'scrolling-stop';
        }
    };
    /**
     * @param {?} animationName
     * @return {?}
     */
    NoticeBarComponent.prototype.insetKeyframe = /**
     * @param {?} animationName
     * @return {?}
     */
    function (animationName) {
        util.insertKeyFrame("@keyframes " + animationName + " {\n      0% { left: 0px; }\n      100% { left: -" + this._width + "px }\n    }", 'notice_bar_animation_cls');
        util.insertKeyFrame("@-webkit-keyframes " + animationName + " {\n      0% { left: 0px; }\n      100% { left: -" + this._width + "px }\n    }", 'notice_bar_animation_cls');
        util.insertKeyFrame("@-moz-keyframes " + animationName + " {\n      0% { left: 0px; }\n      100% { left: -" + this._width + "px }\n    }", 'notice_bar_animation_cls');
        util.insertKeyFrame("@-o-keyframes " + animationName + " {\n      0% { left: 0px; }\n      100% { left: -" + this._width + "px }\n    }", 'notice_bar_animation_cls');
    };
    /**
     * @return {?}
     */
    NoticeBarComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        document.addEventListener('touchstart', (/**
         * @return {?}
         */
        function () {
            _this.marqueeScroll = 'scrolling-stop';
        }));
        document.addEventListener('touchend', (/**
         * @return {?}
         */
        function () {
            _this.marqueeScroll = 'scrolling';
        }));
    };
    /**
     * @return {?}
     */
    NoticeBarComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        util.deleteKeyFrame('notice_bar_animation_cls');
    };
    NoticeBarComponent.decorators = [
        { type: Component, args: [{
                    selector: 'NoticeBar, nzm-notice-bar',
                    template: "<div role=\"alert\" *ngIf=\"visiable\" class=\"am-notice-bar\" (click)=\"click()\">\n  <div *ngIf=\"option.icon !== null\" class=\"am-notice-bar-icon\">\n    <ng-template [ngTemplateOutlet]=\"option.icon || voice\"></ng-template>\n  </div>\n  <div class=\"am-notice-bar-content\">\n    <div class=\"marquee\">\n      <div [ngClass]=\"marqueeScroll\" [ngStyle]=\"style\">\n        <span>{{option.content}}</span>\n        <span>{{option.content}}</span>\n      </div>\n    </div>\n  </div>\n  <div role=\"button\" *ngIf=\"option.mode && option.action !== null\" class=\"am-notice-bar-operation\">\n    <ng-template *ngIf=\"option.mode === 'closable'\" [ngTemplateOutlet]=\"option.action || cross\"></ng-template>\n    <ng-template *ngIf=\"option.mode === 'link'\" [ngTemplateOutlet]=\"option.action || right\"></ng-template>\n  </div>\n</div>\n\n<ng-template #voice>\n  <Icon [type]=\"'voice'\" [size]=\"'xxs'\"></Icon>\n</ng-template>\n<ng-template #cross>\n  <Icon [type]=\"'cross'\" [size]=\"'md'\"></Icon>\n</ng-template>\n<ng-template #right>\n  <Icon [type]=\"'right'\" [size]=\"'md'\"></Icon>\n</ng-template>",
                    providers: [IconHandler]
                }] }
    ];
    /** @nocollapse */
    NoticeBarComponent.ctorParameters = function () { return [
        { type: IconHandler }
    ]; };
    NoticeBarComponent.propDecorators = {
        option: [{ type: Input }],
        onClick: [{ type: Output }]
    };
    return NoticeBarComponent;
}());
export { NoticeBarComponent };
if (false) {
    /** @type {?} */
    NoticeBarComponent.prototype.visiable;
    /** @type {?} */
    NoticeBarComponent.prototype.marqueeScroll;
    /** @type {?} */
    NoticeBarComponent.prototype.style;
    /**
     * @type {?}
     * @private
     */
    NoticeBarComponent.prototype._width;
    /**
     * @type {?}
     * @private
     */
    NoticeBarComponent.prototype._option;
    /** @type {?} */
    NoticeBarComponent.prototype.onClick;
    /**
     * @type {?}
     * @private
     */
    NoticeBarComponent.prototype._iconHandler;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWNlLWJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZy16b3Jyby1hbnRkLW1vYmlsZS8iLCJzb3VyY2VzIjpbIm5vdGljZS1iYXIvbm90aWNlLWJhci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQWEsTUFBTSxlQUFlLENBQUM7QUFDMUYsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2hELE9BQU8sS0FBSyxJQUFJLE1BQU0sUUFBUSxDQUFDO0FBQy9CO0lBbUNFLDRCQUFvQixZQUF5QjtRQUF6QixpQkFBWSxHQUFaLFlBQVksQ0FBYTtRQTdCN0MsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQixrQkFBYSxHQUFHLFdBQVcsQ0FBQztRQUM1QixVQUFLLEdBQUcsRUFBRSxDQUFDO1FBRUgsWUFBTyxHQUFHO1lBQ2hCLElBQUksRUFBRSxFQUFFO1lBQ1IsSUFBSSxFQUFFLEVBQUU7WUFDUixNQUFNLEVBQUUsRUFBRTtZQUNWLE9BQU8sRUFBRSxFQUFFO1lBQ1gsUUFBUSxFQUFFLE1BQU07WUFDaEIsU0FBUyxFQUFFLElBQUk7WUFDZixZQUFZLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUU7U0FDaEYsQ0FBQztRQWVGLFlBQU8sR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUc5QyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFsQkQsc0JBQ0ksc0NBQU07Ozs7UUFEVjtZQUVFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUN0QixDQUFDOzs7OztRQUNELFVBQVcsS0FBSztZQUNkLE1BQU0sQ0FB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QUN0QyxLQUFJLENBQUMsYUFBYSxHQUFHLGdCQUFnQixDQUFDO1FBQ3hDLENBQUMsRUFBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLGdCQUFnQixDQUFDLFVBQVU7OztRQUFFO1lBQ3BDLEtBQUksQ0FBQyxhQUFhLEdBQUcsV0FBVyxDQUFDO1FBQ25DLENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQzs7OztJQUVELHdDQUFXOzs7SUFBWDtRQUNFLElBQUksQ0FBQyxjQUFjLENBQUMsMEJBQTBCLENBQUMsQ0FBQztJQUNsRCxDQUFDOztnQkFwR0YsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSwyQkFBMkI7b0JBQ3JDLHNtQ0FBMEM7b0JBQzFDLFNBQVMsRUFBRSxDQUFDLFdBQVcsQ0FBQztpQkFDekI7Ozs7Z0JBTlEsV0FBVzs7O3lCQXFCakIsS0FBSzswQkFhTCxNQUFNOztJQXFFVCx5QkFBQztDQUFBLEFBckdELElBcUdDO1NBaEdZLGtCQUFrQjs7O0lBQzdCLHNDQUFpQjs7SUFDakIsMkNBQTRCOztJQUM1QixtQ0FBVzs7Ozs7SUFDWCxvQ0FBZTs7Ozs7SUFDZixxQ0FRRTs7SUFjRixxQ0FDZ0Q7Ozs7O0lBRXBDLDBDQUFpQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSWNvbkhhbmRsZXIgfSBmcm9tICcuLi9jb3JlL3V0aWwvaWNvbic7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gJy4vdXRpbCc7XG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdOb3RpY2VCYXIsIG56bS1ub3RpY2UtYmFyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL25vdGljZS1iYXIuY29tcG9uZW50Lmh0bWwnLFxuICBwcm92aWRlcnM6IFtJY29uSGFuZGxlcl1cbn0pXG5leHBvcnQgY2xhc3MgTm90aWNlQmFyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICB2aXNpYWJsZSA9IGZhbHNlO1xuICBtYXJxdWVlU2Nyb2xsID0gJ3Njcm9sbGluZyc7XG4gIHN0eWxlID0ge307XG4gIHByaXZhdGUgX3dpZHRoO1xuICBwcml2YXRlIF9vcHRpb24gPSB7XG4gICAgbW9kZTogJycsXG4gICAgaWNvbjogJycsXG4gICAgYWN0aW9uOiAnJyxcbiAgICBjb250ZW50OiAnJyxcbiAgICBmb250U2l6ZTogJzE0cHgnLFxuICAgIHNjcm9sbGluZzogdHJ1ZSxcbiAgICBtYXJxdWVlUHJvcHM6IHsgbG9vcDogdHJ1ZSwgbGVhZGluZzogNTAwLCB0cmFpbGluZzogODAwMCwgZnBzOiAyMDAsIHN0eWxlOiB7fSB9XG4gIH07XG4gIEBJbnB1dCgpXG4gIGdldCBvcHRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbjtcbiAgfVxuICBzZXQgb3B0aW9uKHZhbHVlKSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLl9vcHRpb24sIHZhbHVlKTtcbiAgICB0aGlzLmRhdGFQcm9jZXNzKCk7XG4gICAgaWYgKHRoaXMuX29wdGlvbi5zY3JvbGxpbmcpIHtcbiAgICAgIHRoaXMubWFycXVlZVNjcm9sbCA9ICdzY3JvbGxpbmcnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcnF1ZWVTY3JvbGwgPSAnc2Nyb2xsaW5nLXN0b3AnO1xuICAgIH1cbiAgfVxuICBAT3V0cHV0KClcbiAgb25DbGljazogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfaWNvbkhhbmRsZXI6IEljb25IYW5kbGVyKSB7XG4gICAgdGhpcy5faWNvbkhhbmRsZXIubG9hZCgpO1xuICB9XG5cbiAgY2xpY2soKSB7XG4gICAgdGhpcy5vbkNsaWNrLmVtaXQodGhpcy5fb3B0aW9uLm1vZGUpO1xuICAgIGlmICh0aGlzLl9vcHRpb24ubW9kZSA9PT0gJ2Nsb3NhYmxlJykge1xuICAgICAgdGhpcy52aXNpYWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGRhdGFQcm9jZXNzKCkge1xuICAgIHRoaXMudmlzaWFibGUgPSB0cnVlO1xuICAgIHRoaXMuc3R5bGUgPSB7XG4gICAgICB3aWR0aDogJzIwMCUnXG4gICAgfTtcbiAgICB0aGlzLl93aWR0aCA9IHV0aWwuZ2V0VGV4dFdpZHRoKHRoaXMuX29wdGlvbi5jb250ZW50LCB0aGlzLl9vcHRpb24uZm9udFNpemUpO1xuICAgIGlmICh1dGlsLmdldFdpZHRoSGVpZ2h0KCkud2lkdGggPCB0aGlzLl93aWR0aCkge1xuICAgICAgY29uc3QgY291bnQgPSB0aGlzLl9vcHRpb24ubWFycXVlZVByb3BzLmxvb3AgPyAnaW5maW5pdGUnIDogMTtcbiAgICAgIGxldCBhbmltYXRpb25OYW1lID0gYG5vdGljZWJhcm1hcnF1ZWVfJHt0aGlzLl93aWR0aH1gO1xuICAgICAgdGhpcy5zdHlsZSA9IHtcbiAgICAgICAgd2lkdGg6IHRoaXMuX3dpZHRoICogMiArICdweCcsXG4gICAgICAgICdhbmltYXRpb24tbmFtZSc6IGFuaW1hdGlvbk5hbWUsXG4gICAgICAgICdhbmltYXRpb24tZGVsYXknOiBgJHt0aGlzLl9vcHRpb24ubWFycXVlZVByb3BzLmxlYWRpbmd9bXNgLFxuICAgICAgICAnYW5pbWF0aW9uLWR1cmF0aW9uJzogYCR7KDEgLyB0aGlzLl9vcHRpb24ubWFycXVlZVByb3BzLmZwcykgKiB0aGlzLl93aWR0aCAvIHV0aWwuZ2V0V2lkdGhIZWlnaHQoKS53aWR0aCAqIDEwMDB9c2AsXG4gICAgICAgICdhbmltYXRpb24taXRlcmF0aW9uLWNvdW50JzogYCR7Y291bnR9YFxuICAgICAgfTtcbiAgICAgIHRoaXMubWFycXVlZVNjcm9sbCA9ICdzY3JvbGxpbmcnO1xuICAgICAgdGhpcy5pbnNldEtleWZyYW1lKGFuaW1hdGlvbk5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcnF1ZWVTY3JvbGwgPSAnc2Nyb2xsaW5nLXN0b3AnO1xuICAgIH1cbiAgfVxuXG4gIGluc2V0S2V5ZnJhbWUoYW5pbWF0aW9uTmFtZSkge1xuICAgIHV0aWwuaW5zZXJ0S2V5RnJhbWUoYEBrZXlmcmFtZXMgJHthbmltYXRpb25OYW1lfSB7XG4gICAgICAwJSB7IGxlZnQ6IDBweDsgfVxuICAgICAgMTAwJSB7IGxlZnQ6IC0ke3RoaXMuX3dpZHRofXB4IH1cbiAgICB9YCwgJ25vdGljZV9iYXJfYW5pbWF0aW9uX2NscycpO1xuICAgIHV0aWwuaW5zZXJ0S2V5RnJhbWUoYEAtd2Via2l0LWtleWZyYW1lcyAke2FuaW1hdGlvbk5hbWV9IHtcbiAgICAgIDAlIHsgbGVmdDogMHB4OyB9XG4gICAgICAxMDAlIHsgbGVmdDogLSR7dGhpcy5fd2lkdGh9cHggfVxuICAgIH1gLCAnbm90aWNlX2Jhcl9hbmltYXRpb25fY2xzJyk7XG4gICAgdXRpbC5pbnNlcnRLZXlGcmFtZShgQC1tb3ota2V5ZnJhbWVzICR7YW5pbWF0aW9uTmFtZX0ge1xuICAgICAgMCUgeyBsZWZ0OiAwcHg7IH1cbiAgICAgIDEwMCUgeyBsZWZ0OiAtJHt0aGlzLl93aWR0aH1weCB9XG4gICAgfWAsICdub3RpY2VfYmFyX2FuaW1hdGlvbl9jbHMnKTtcbiAgICB1dGlsLmluc2VydEtleUZyYW1lKGBALW8ta2V5ZnJhbWVzICR7YW5pbWF0aW9uTmFtZX0ge1xuICAgICAgMCUgeyBsZWZ0OiAwcHg7IH1cbiAgICAgIDEwMCUgeyBsZWZ0OiAtJHt0aGlzLl93aWR0aH1weCB9XG4gICAgfWAsICdub3RpY2VfYmFyX2FuaW1hdGlvbl9jbHMnKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoKSA9PiB7XG4gICAgICB0aGlzLm1hcnF1ZWVTY3JvbGwgPSAnc2Nyb2xsaW5nLXN0b3AnO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoKSA9PiB7XG4gICAgICB0aGlzLm1hcnF1ZWVTY3JvbGwgPSAnc2Nyb2xsaW5nJztcbiAgICB9KTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHV0aWwuZGVsZXRlS2V5RnJhbWUoJ25vdGljZV9iYXJfYW5pbWF0aW9uX2NscycpO1xuICB9XG59Il19